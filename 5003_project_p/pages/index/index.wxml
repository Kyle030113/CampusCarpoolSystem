<!-- pages/index/index.wxml -->
<view class="page" style="min-height:100%;background:#fff;padding-bottom:80px;">

<!-- top bar -->
<view class="top-bar" style="display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #eee;">
  <text style="font-weight:700;font-size:18px;color:#1aad19;">行程广场</text>
  <view style="display:flex;align-items:center;">
    <button bindtap="showFilterPanel" style="padding:6px 10px;border-radius:6px;border:1px solid #ddd;background:#fff;">筛选</button>
    <button bindtap="resetFilter" style="margin-left:10px;padding:6px 10px;border-radius:6px;border:1px solid #ddd;background:#fff;">清除筛选</button>
  </view>
</view>

<!-- List -->
<view class="list">
  <block wx:for="{{filteredList}}" wx:key="carpoolId" wx:for-item="item">
    <view style="padding:12px;border-bottom:1px solid #eee;">
      <view style="font-weight:700;color:#333;margin-bottom:6px;">
        <text style="color:#e53935;">{{item.displayOrigin || '未知出发地'}}</text>
        <text> → </text>
        <text style="color:#2e7d32;">{{item.displayDestination || '未知目的地'}}</text>
      </view>
      <view style="color:#666;margin-bottom:8px;">出发时间：{{item.displayDeparture}}</view>
      <view>
        <button wx:if="{{!item.isFinished}}" bindtap="joinCarpool" data-id="{{item.carpoolId}}" style="background:#1aad19;color:#fff;padding:6px 12px;border-radius:18px;">加入拼车</button>
        <view wx:else style="color:#999;">已结束</view>
      </view>
    </view>
  </block>
  <view wx:if="{{filteredList.length===0}}" style="padding:18px;text-align:center;color:#999;">暂无拼车信息</view>
</view>

<!-- publish floating -->
<view style="position:fixed;right:18px;bottom:18px;z-index:1000;">
  <button bindtap="goToPublish" style="width:64px;height:64px;border-radius:32px;background:#1aad19;color:#fff;font-size:28px;display:flex;align-items:center;justify-content:center;">+</button>
</view>
</view>